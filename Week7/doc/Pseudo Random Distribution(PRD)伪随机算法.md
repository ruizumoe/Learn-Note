# Pseudo Random Distribution(PRD)伪随机算法

## 简介

[(PRD)伪随机算法](https://liquipedia.net/dota2/Pseudo_Random_Distribution)

降低连续触发概率，保证限定次数内必然触发，降低脸红或者脸黑导致游戏平衡性问题，平滑玩家体验。

PRD数值简表
P(E) : 期望概率，C：累加常数， MaxN：必然触发所需修正次数，PunishN：惩罚性降低概率次数。
![Alt text](<Pseudo Random Distribution(PRD)伪随机算法/image.png>)

## 适用场景
PRD的核心在于降低初始概率，来实现离散触发点，降低连续触发。从数学角度C值对应P(E)前提是行为次数（n）趋近于无穷。从应用角度即触发次数越大实际概率越趋近于期望概率，因而适用于游戏中的高频行为(行为次数远大于PunishN)。
对于低频、低概率行为，PRD算法会严重降低实际概率。游戏对局局内低频、低概率行为不妨使用真随机。


## PRD使用经验
### PRD累加数(N)初始化
若每局开始重置N值为0，玩家在开始阶段必然经历概率惩罚阶段，容易导致初始体验降低，对局结束时N值清除，前期经历的惩罚没有得到奖励，所以游戏中的实际概率是低于期望概率的，单局行为触发次数越低，降低概率影响越大。
解决方案：
1.  随机初始化N值。 常用区间[0, √ MaxN] 、[0, MaxN] 。
2.  跨局继承N值。每局结束时，保存所有PRD的N值，下一局以该值初始化N值。
相较于方案一，方案二优点：可以精确保证所有对局的触发率，平滑玩家整体体验，便于数值设计。缺点在于：如果设计方案被玩家洞悉，玩家可以通关前通过"垫刀"方式，提高下一次触发概率。
### 避免过度设计
针对低频低概率的部分行为，不妨使用真随机，PRD目的在于降低连续触发率，保证一定次数必定触发。但对于低概率行为，降低连续触发率效果并不明显，玩家对于低概率行为不触发容忍度也更高。
### 一些经验值
使用中10%及以下概率，一般单局行为平均次数超过MaxN时才考虑使用PRD，10%以下概率行为平均次数不超过PunishN时慎用，若使用一定要用，初始化或跨局继承N。
针对高概率部分，有必要的话，可适当进行概率削减，参考暴雪War3数据(30%开始削）

![Alt text](<Pseudo Random Distribution(PRD)伪随机算法/image-1.png>)